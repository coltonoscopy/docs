<!DOCTYPE html>

<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet"/>
        <script crossorigin="anonymous" integrity="sha256-cCueBR6CsyA4/9szpPfrX3s49M9vUU5BgtiJj06wt/s=" src="https://code.jquery.com/jquery-3.1.0.min.js"></script>
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({
                tex2jax: {
                    displayMath: [["\\[", "\\]"]],
                    ignoreClass: "nostem|nostem|nolatexmath",
                    inlineMath: [["\\(", "\\)"]]
                },
                asciimath2jax: {
                    delimiters: [["\\$", "\\$"]],
                    ignoreClass: "nostem|nostem|noasciimath",
                    processEnvironments: true
                }
            });
        </script>
        <script async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
        <script>

            $(function() {

                // responsive embed
                // http://getbootstrap.com/components/#responsive-embed
                $('div.videoblock div.content').addClass('embed-responsive embed-responsive-16by9');
                $('div.videoblock div.content iframe').addClass('embed-responsive-item');

            });

        </script>
        <style>

            /* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
article, aside, details, figcaption, figure, footer, header, hgroup, main, nav, section, summary { display: block; }
audio, canvas, video { display: inline-block; }
audio:not([controls]) { display: none; height: 0; }
[hidden] { display: none; }
html { background: #fff; color: #000; font-family: sans-serif; -ms-text-size-adjust: 100%; -webkit-text-size-adjust: 100%; }
body { margin: 0; }
a:focus { outline: thin dotted; }
a:active, a:hover { outline: 0; }
h1 { font-size: 2em; margin: 0.67em 0; }
abbr[title] { border-bottom: 1px dotted; }
b, strong { font-weight: bold; }
dfn { font-style: italic; }
hr { -moz-box-sizing: content-box; box-sizing: content-box; height: 0; }
mark { background: #ff0; color: #000; }
code, kbd, pre, samp { font-family: monospace, serif; font-size: 1em; }
pre { white-space: pre-wrap; }
q { quotes: "\201C" "\201D" "\2018" "\2019"; }
small { font-size: 80%; }
sub, sup { font-size: 75%; line-height: 0; position: relative; vertical-align: baseline; }
sup { top: -0.5em; }
sub { bottom: -0.25em; }
img { border: 0; }
svg:not(:root) { overflow: hidden; }
figure { margin: 0; }
fieldset { border: 1px solid #c0c0c0; margin: 0 2px; padding: 0.35em 0.625em 0.75em; }
legend { border: 0; padding: 0; }
button, input, select, textarea { font-family: inherit; font-size: 100%; margin: 0; }
button, input { line-height: normal; }
button, select { text-transform: none; }
button, html input[type="button"], input[type="reset"], input[type="submit"] { -webkit-appearance: button; cursor: pointer; }
button[disabled], html input[disabled] { cursor: default; }
input[type="checkbox"], input[type="radio"] { box-sizing: border-box; padding: 0; }
input[type="search"] { -webkit-appearance: textfield; -moz-box-sizing: content-box; -webkit-box-sizing: content-box; box-sizing: content-box; }
input[type="search"]::-webkit-search-cancel-button, input[type="search"]::-webkit-search-decoration { -webkit-appearance: none; }
button::-moz-focus-inner, input::-moz-focus-inner { border: 0; padding: 0; }
textarea { overflow: auto; vertical-align: top; }
table { border-collapse: collapse; border-spacing: 0; }
*, *:before, *:after { -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }
html, body { font-size: 100%; }
body { background: white; color: #222222; padding: 0; margin: 0; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; line-height: 1; position: relative; cursor: auto; }
a:hover { cursor: pointer; }
a:focus { outline: none; }
img, object, embed { max-width: 100%; height: auto; }
object, embed { height: 100%; }
img { -ms-interpolation-mode: bicubic; }
#map_canvas img, #map_canvas embed, #map_canvas object, .map_canvas img, .map_canvas embed, .map_canvas object { max-width: none !important; }
.left { float: left !important; }
.right { float: right !important; }
.text-left { text-align: left !important; }
.text-right { text-align: right !important; }
.text-center { text-align: center !important; }
.text-justify { text-align: justify !important; }
.hide { display: none; }
.antialiased, body { -webkit-font-smoothing: antialiased; }
img { display: inline-block; vertical-align: middle; }
textarea { height: auto; min-height: 50px; }
select { width: 100%; }
p.lead, .paragraph.lead > p, #preamble > .sectionbody > .paragraph:first-of-type p { font-size: 1.21875em; line-height: 1.6; }
.subheader, #content #toctitle, .admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title, .tableblock > caption { line-height: 1.4; color: #7a2518; font-weight: 300; margin-top: 0.2em; margin-bottom: 0.5em; }
div, dl, dt, dd, ul, ol, li, h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6, pre, form, p, blockquote, th, td { margin: 0; padding: 0; direction: ltr; }
a { color: #005498; text-decoration: underline; line-height: inherit; }
a:hover, a:focus { color: #00467f; }
a img { border: none; }
p { font-family: inherit; font-weight: normal; font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; text-rendering: optimizeLegibility; }
p aside { font-size: 0.875em; line-height: 1.35; font-style: italic; }
h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { font-family: Georgia, "URW Bookman L", Helvetica, Arial, sans-serif; font-weight: normal; font-style: normal; color: #ba3925; text-rendering: optimizeLegibility; margin-top: 1em; margin-bottom: 0.5em; line-height: 1.2125em; }
h1 small, h2 small, h3 small, #toctitle small, .sidebarblock > .content > .title small, h4 small, h5 small, h6 small { font-size: 60%; color: #e99b8f; line-height: 0; }
h1 { font-size: 2.125em; }
h2 { font-size: 1.6875em; }
h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.375em; }
h4 { font-size: 1.125em; }
h5 { font-size: 1.125em; }
h6 { font-size: 1em; }
hr { border: solid #dddddd; border-width: 1px 0 0; clear: both; margin: 1.25em 0 1.1875em; height: 0; }
em, i { font-style: italic; line-height: inherit; }
strong, b { font-weight: bold; line-height: inherit; }
small { font-size: 60%; line-height: inherit; }
code { font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; color: #6d180b; }
ul, ol, dl { font-size: 1em; line-height: 1.6; margin-bottom: 1.25em; list-style-position: outside; font-family: inherit; }
ul, ol { margin-left: 1.5em; }
ul li ul, ul li ol { margin-left: 1.25em; margin-bottom: 0; font-size: 1em; }
ul.square li ul, ul.circle li ul, ul.disc li ul { list-style: inherit; }
ul.square { list-style-type: square; }
ul.circle { list-style-type: circle; }
ul.disc { list-style-type: disc; }
ul.no-bullet { list-style: none; }
ol li ul, ol li ol { margin-left: 1.25em; margin-bottom: 0; }
dl dt { margin-bottom: 0.3125em; font-weight: bold; }
dl dd { margin-bottom: 1.25em; }
abbr, acronym { text-transform: uppercase; font-size: 90%; color: #222222; border-bottom: 1px dotted #dddddd; cursor: help; }
abbr { text-transform: none; }
blockquote { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
blockquote cite { display: block; font-size: inherit; color: #555555; }
blockquote cite:before { content: "\2014 \0020"; }
blockquote cite a, blockquote cite a:visited { color: #555555; }
blockquote, blockquote p { line-height: 1.6; color: #6f6f6f; }
.vcard { display: inline-block; margin: 0 0 1.25em 0; border: 1px solid #dddddd; padding: 0.625em 0.75em; }
.vcard li { margin: 0; display: block; }
.vcard .fn { font-weight: bold; font-size: 0.9375em; }
.vevent .summary { font-weight: bold; }
.vevent abbr { cursor: auto; text-decoration: none; font-weight: bold; border: none; padding: 0 0.0625em; }
@media only screen and (min-width: 768px) { h1, h2, h3, #toctitle, .sidebarblock > .content > .title, h4, h5, h6 { line-height: 1.4; }
  h1 { font-size: 2.75em; }
  h2 { font-size: 2.3125em; }
  h3, #toctitle, .sidebarblock > .content > .title { font-size: 1.6875em; }
  h4 { font-size: 1.4375em; } }
.print-only { display: none !important; }
@media print { * { background: transparent !important; color: #000 !important; box-shadow: none !important; text-shadow: none !important; }
  a, a:visited { text-decoration: underline; }
  a[href]:after { content: " (" attr(href) ")"; }
  abbr[title]:after { content: " (" attr(title) ")"; }
  .ir a:after, a[href^="javascript:"]:after, a[href^="#"]:after { content: ""; }
  pre, blockquote { border: 1px solid #999; page-break-inside: avoid; }
  thead { display: table-header-group; }
  tr, img { page-break-inside: avoid; }
  img { max-width: 100% !important; }
  @page { margin: 0.5cm; }
  p, h2, h3, #toctitle, .sidebarblock > .content > .title { orphans: 3; widows: 3; }
  h2, h3, #toctitle, .sidebarblock > .content > .title { page-break-after: avoid; }
  .hide-on-print { display: none !important; }
  .print-only { display: block !important; }
  .hide-for-print { display: none !important; }
  .show-for-print { display: inherit !important; } }
table { background: white; margin-bottom: 1.25em; border: solid 1px #dddddd; }
table thead, table tfoot { background: whitesmoke; font-weight: bold; }
table thead tr th, table thead tr td, table tfoot tr th, table tfoot tr td { padding: 0.5em 0.625em 0.625em; font-size: inherit; color: #222222; text-align: left; }
table tr th, table tr td { padding: 0.5625em 0.625em; font-size: inherit; color: #222222; }
table tr.even, table tr.alt, table tr:nth-of-type(even) { background: #f9f9f9; }
table thead tr th, table tfoot tr th, table tbody tr td, table tr td, table tfoot tr td { display: table-cell; line-height: 1.6; }
.clearfix:before, .clearfix:after, .float-group:before, .float-group:after { content: " "; display: table; }
.clearfix:after, .float-group:after { clear: both; }
*:not(pre) > code { font-size: 0.9375em; padding: 1px 3px 0; white-space: nowrap; background-color: #f2f2f2; border: 1px solid #cccccc; -webkit-border-radius: 4px; border-radius: 4px; text-shadow: none; }
pre, pre > code { line-height: 1.4; color: inherit; font-family: Consolas, "Liberation Mono", Courier, monospace; font-weight: normal; }
kbd.keyseq { color: #555555; }
kbd:not(.keyseq) { display: inline-block; color: #222222; font-size: 0.75em; line-height: 1.4; background-color: #F7F7F7; border: 1px solid #ccc; -webkit-border-radius: 3px; border-radius: 3px; -webkit-box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; box-shadow: 0 1px 0 rgba(0, 0, 0, 0.2), 0 0 0 2px white inset; margin: -0.15em 0.15em 0 0.15em; padding: 0.2em 0.6em 0.2em 0.5em; vertical-align: middle; white-space: nowrap; }
kbd kbd:first-child { margin-left: 0; }
kbd kbd:last-child { margin-right: 0; }
.menuseq, .menu { color: #090909; }
p a > code:hover { color: #561309; }
#header, #content, #footnotes, #footer { width: 100%; margin-left: auto; margin-right: auto; margin-top: 0; margin-bottom: 0; max-width: 62.5em; *zoom: 1; position: relative; padding-left: 0.9375em; padding-right: 0.9375em; }
#header:before, #header:after, #content:before, #content:after, #footnotes:before, #footnotes:after, #footer:before, #footer:after { content: " "; display: table; }
#header:after, #content:after, #footnotes:after, #footer:after { clear: both; }
#header { margin-bottom: 2.5em; }
#header > h1 { color: black; font-weight: normal; border-bottom: 1px solid #dddddd; margin-bottom: -28px; padding-bottom: 32px; }
#header span { color: #6f6f6f; }
#header #revnumber { text-transform: capitalize; }
#header br { display: none; }
#header br + span { padding-left: 3px; }
#header br + span:before { content: "\2013 \0020"; }
#header br + span.author { padding-left: 0; }
#header br + span.author:before { content: ", "; }
#toc { border-bottom: 3px double #ebebeb; padding-bottom: 1.25em; }
#toc > ul { margin-left: 0.25em; }
#toc ul.sectlevel0 > li > a { font-style: italic; }
#toc ul.sectlevel0 ul.sectlevel1 { margin-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
#toc ul { list-style-type: none; }
#toctitle { color: #7a2518; }
@media only screen and (min-width: 1280px) { body.toc2 { padding-left: 20em; }
  #toc.toc2 { position: fixed; width: 20em; left: 0; top: 0; border-right: 1px solid #ebebeb; border-bottom: 0; z-index: 1000; padding: 1em; height: 100%; overflow: auto; }
  #toc.toc2 #toctitle { margin-top: 0; }
  #toc.toc2 > ul { font-size: .95em; }
  #toc.toc2 ul ul { margin-left: 0; padding-left: 1.25em; }
  #toc.toc2 ul.sectlevel0 ul.sectlevel1 { padding-left: 0; margin-top: 0.5em; margin-bottom: 0.5em; }
  body.toc2.toc-right { padding-left: 0; padding-right: 20em; }
  body.toc2.toc-right #toc.toc2 { border-right: 0; border-left: 1px solid #ebebeb; left: auto; right: 0; } }
#content #toc { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; border-width: 0; -webkit-border-radius: 4px; border-radius: 4px; }
#content #toc > :first-child { margin-top: 0; }
#content #toc > :last-child { margin-bottom: 0; }
#content #toc a { text-decoration: none; }
#content #toctitle { font-weight: bold; font-family: "Helvetica Neue", "Helvetica", Helvetica, Arial, sans-serif; font-size: 1em; padding-left: 0.125em; }
#footer { max-width: 100%; background-color: #222222; padding: 1.25em; }
#footer-text { color: #dddddd; line-height: 1.44; }
.sect1 { padding-bottom: 1.25em; }
.sect1 + .sect1 { border-top: 3px double #ebebeb; }
#content h1 > a.anchor, h2 > a.anchor, h3 > a.anchor, #toctitle > a.anchor, .sidebarblock > .content > .title > a.anchor, h4 > a.anchor, h5 > a.anchor, h6 > a.anchor { position: absolute; width: 1em; margin-left: -1em; display: block; text-decoration: none; visibility: hidden; text-align: center; font-weight: normal; }
#content h1 > a.anchor:before, h2 > a.anchor:before, h3 > a.anchor:before, #toctitle > a.anchor:before, .sidebarblock > .content > .title > a.anchor:before, h4 > a.anchor:before, h5 > a.anchor:before, h6 > a.anchor:before { content: '\00A7'; font-size: .85em; vertical-align: text-top; display: block; margin-top: 0.05em; }
#content h1:hover > a.anchor, #content h1 > a.anchor:hover, h2:hover > a.anchor, h2 > a.anchor:hover, h3:hover > a.anchor, #toctitle:hover > a.anchor, .sidebarblock > .content > .title:hover > a.anchor, h3 > a.anchor:hover, #toctitle > a.anchor:hover, .sidebarblock > .content > .title > a.anchor:hover, h4:hover > a.anchor, h4 > a.anchor:hover, h5:hover > a.anchor, h5 > a.anchor:hover, h6:hover > a.anchor, h6 > a.anchor:hover { visibility: visible; }
#content h1 > a.link, h2 > a.link, h3 > a.link, #toctitle > a.link, .sidebarblock > .content > .title > a.link, h4 > a.link, h5 > a.link, h6 > a.link { color: #ba3925; text-decoration: none; }
#content h1 > a.link:hover, h2 > a.link:hover, h3 > a.link:hover, #toctitle > a.link:hover, .sidebarblock > .content > .title > a.link:hover, h4 > a.link:hover, h5 > a.link:hover, h6 > a.link:hover { color: #a53221; }
.imageblock, .literalblock, .listingblock, .verseblock, .videoblock { margin-bottom: 1.25em; }
.admonitionblock td.content > .title, .exampleblock > .title, .imageblock > .title, .videoblock > .title, .listingblock > .title, .literalblock > .title, .openblock > .title, .paragraph > .title, .quoteblock > .title, .sidebarblock > .title, .tableblock > .title, .verseblock > .title, .dlist > .title, .olist > .title, .ulist > .title, .qlist > .title, .hdlist > .title { text-align: left; font-weight: bold; }
.tableblock > caption { text-align: left; font-weight: bold; white-space: nowrap; overflow: visible; max-width: 0; }
table.tableblock #preamble > .sectionbody > .paragraph:first-of-type p { font-size: inherit; }
.admonitionblock > table { border: 0; background: none; width: 100%; }
.admonitionblock > table td.icon { text-align: center; width: 80px; }
.admonitionblock > table td.icon img { max-width: none; }
.admonitionblock > table td.icon .title { font-weight: bold; text-transform: uppercase; }
.admonitionblock > table td.content { padding-left: 1.125em; padding-right: 1.25em; border-left: 1px solid #dddddd; color: #6f6f6f; }
.admonitionblock > table td.content > :last-child > :last-child { margin-bottom: 0; }
.exampleblock > .content { border-style: solid; border-width: 1px; border-color: #e6e6e6; margin-bottom: 1.25em; padding: 1.25em; background: white; -webkit-border-radius: 4px; border-radius: 4px; }
.exampleblock > .content > :first-child { margin-top: 0; }
.exampleblock > .content > :last-child { margin-bottom: 0; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6, .exampleblock > .content p { color: #333333; }
.exampleblock > .content h1, .exampleblock > .content h2, .exampleblock > .content h3, .exampleblock > .content #toctitle, .sidebarblock.exampleblock > .content > .title, .exampleblock > .content h4, .exampleblock > .content h5, .exampleblock > .content h6 { line-height: 1; margin-bottom: 0.625em; }
.exampleblock > .content h1.subheader, .exampleblock > .content h2.subheader, .exampleblock > .content h3.subheader, .exampleblock > .content .subheader#toctitle, .sidebarblock.exampleblock > .content > .subheader.title, .exampleblock > .content h4.subheader, .exampleblock > .content h5.subheader, .exampleblock > .content h6.subheader { line-height: 1.4; }
.exampleblock.result > .content { -webkit-box-shadow: 0 1px 8px #d9d9d9; box-shadow: 0 1px 8px #d9d9d9; }
.sidebarblock { border-style: solid; border-width: 1px; border-color: #d9d9d9; margin-bottom: 1.25em; padding: 1.25em; background: #f2f2f2; -webkit-border-radius: 4px; border-radius: 4px; }
.sidebarblock > :first-child { margin-top: 0; }
.sidebarblock > :last-child { margin-bottom: 0; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6, .sidebarblock p { color: #333333; }
.sidebarblock h1, .sidebarblock h2, .sidebarblock h3, .sidebarblock #toctitle, .sidebarblock > .content > .title, .sidebarblock h4, .sidebarblock h5, .sidebarblock h6 { line-height: 1; margin-bottom: 0.625em; }
.sidebarblock h1.subheader, .sidebarblock h2.subheader, .sidebarblock h3.subheader, .sidebarblock .subheader#toctitle, .sidebarblock > .content > .subheader.title, .sidebarblock h4.subheader, .sidebarblock h5.subheader, .sidebarblock h6.subheader { line-height: 1.4; }
.sidebarblock > .content > .title { color: #7a2518; margin-top: 0; line-height: 1.6; }
.exampleblock > .content > :last-child > :last-child, .exampleblock > .content .olist > ol > li:last-child > :last-child, .exampleblock > .content .ulist > ul > li:last-child > :last-child, .exampleblock > .content .qlist > ol > li:last-child > :last-child, .sidebarblock > .content > :last-child > :last-child, .sidebarblock > .content .olist > ol > li:last-child > :last-child, .sidebarblock > .content .ulist > ul > li:last-child > :last-child, .sidebarblock > .content .qlist > ol > li:last-child > :last-child { margin-bottom: 0; }
.literalblock > .content pre, .listingblock > .content pre { background: none; border-width: 1px 0; border-style: dotted; border-color: #bfbfbf; -webkit-border-radius: 4px; border-radius: 4px; padding: 0.75em 0.75em 0.5em 0.75em; word-wrap: break-word; }
.literalblock > .content pre.nowrap, .listingblock > .content pre.nowrap { overflow-x: auto; white-space: pre; word-wrap: normal; }
.literalblock > .content pre > code, .listingblock > .content pre > code { display: block; }
@media only screen { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.8em; } }
@media only screen and (min-width: 768px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 0.9em; } }
@media only screen and (min-width: 1280px) { .literalblock > .content pre, .listingblock > .content pre { font-size: 1em; } }
.listingblock > .content { position: relative; }
.listingblock:hover code[class*=" language-"]:before { text-transform: uppercase; font-size: 0.9em; color: #999; position: absolute; top: 0.375em; right: 0.375em; }
.listingblock:hover code.asciidoc:before { content: "asciidoc"; }
.listingblock:hover code.clojure:before { content: "clojure"; }
.listingblock:hover code.css:before { content: "css"; }
.listingblock:hover code.groovy:before { content: "groovy"; }
.listingblock:hover code.html:before { content: "html"; }
.listingblock:hover code.java:before { content: "java"; }
.listingblock:hover code.javascript:before { content: "javascript"; }
.listingblock:hover code.python:before { content: "python"; }
.listingblock:hover code.ruby:before { content: "ruby"; }
.listingblock:hover code.scss:before { content: "scss"; }
.listingblock:hover code.xml:before { content: "xml"; }
.listingblock:hover code.yaml:before { content: "yaml"; }
.listingblock.terminal pre .command:before { content: attr(data-prompt); padding-right: 0.5em; color: #999; }
.listingblock.terminal pre .command:not([data-prompt]):before { content: '$'; }
table.pyhltable { border: 0; margin-bottom: 0; }
table.pyhltable td { vertical-align: top; padding-top: 0; padding-bottom: 0; }
table.pyhltable td.code { padding-left: .75em; padding-right: 0; }
.highlight.pygments .lineno, table.pyhltable td:not(.code) { color: #999; padding-left: 0; padding-right: .5em; border-right: 1px solid #dddddd; }
.highlight.pygments .lineno { display: inline-block; margin-right: .25em; }
table.pyhltable .linenodiv { background-color: transparent !important; padding-right: 0 !important; }
.quoteblock { margin: 0 0 1.25em; padding: 0.5625em 1.25em 0 1.1875em; border-left: 1px solid #dddddd; }
.quoteblock blockquote { margin: 0 0 1.25em 0; padding: 0 0 0.5625em 0; border: 0; }
.quoteblock blockquote > .paragraph:last-child p { margin-bottom: 0; }
.quoteblock .attribution { margin-top: -.25em; padding-bottom: 0.5625em; font-size: inherit; color: #555555; }
.quoteblock .attribution br { display: none; }
.quoteblock .attribution cite { display: block; margin-bottom: 0.625em; }
table thead th, table tfoot th { font-weight: bold; }
table.tableblock.grid-all { border-collapse: separate; border-spacing: 1px; -webkit-border-radius: 4px; border-radius: 4px; border-top: 1px solid #dddddd; border-bottom: 1px solid #dddddd; }
table.tableblock.frame-topbot, table.tableblock.frame-none { border-left: 0; border-right: 0; }
table.tableblock.frame-sides, table.tableblock.frame-none { border-top: 0; border-bottom: 0; }
table.tableblock td .paragraph:last-child p, table.tableblock td > p:last-child { margin-bottom: 0; }
th.tableblock.halign-left, td.tableblock.halign-left { text-align: left; }
th.tableblock.halign-right, td.tableblock.halign-right { text-align: right; }
th.tableblock.halign-center, td.tableblock.halign-center { text-align: center; }
th.tableblock.valign-top, td.tableblock.valign-top { vertical-align: top; }
th.tableblock.valign-bottom, td.tableblock.valign-bottom { vertical-align: bottom; }
th.tableblock.valign-middle, td.tableblock.valign-middle { vertical-align: middle; }
p.tableblock.header { color: #222222; font-weight: bold; }
td > div.verse { white-space: pre; }
ol { margin-left: 1.75em; }
ul li ol { margin-left: 1.5em; }
dl dd { margin-left: 1.125em; }
dl dd:last-child, dl dd:last-child > :last-child { margin-bottom: 0; }
ol > li p, ul > li p, ul dd, ol dd, .olist .olist, .ulist .ulist, .ulist .olist, .olist .ulist { margin-bottom: 0.625em; }
ul.unstyled, ol.unnumbered, ul.checklist, ul.none { list-style-type: none; }
ul.unstyled, ol.unnumbered, ul.checklist { margin-left: 0.625em; }
ul.checklist li > p:first-child > i[class^="icon-check"]:first-child, ul.checklist li > p:first-child > input[type="checkbox"]:first-child { margin-right: 0.25em; }
ul.checklist li > p:first-child > input[type="checkbox"]:first-child { position: relative; top: 1px; }
ul.inline { margin: 0 auto 0.625em auto; margin-left: -1.375em; margin-right: 0; padding: 0; list-style: none; overflow: hidden; }
ul.inline > li { list-style: none; float: left; margin-left: 1.375em; display: block; }
ul.inline > li > * { display: block; }
.unstyled dl dt { font-weight: normal; font-style: normal; }
ol.arabic { list-style-type: decimal; }
ol.decimal { list-style-type: decimal-leading-zero; }
ol.loweralpha { list-style-type: lower-alpha; }
ol.upperalpha { list-style-type: upper-alpha; }
ol.lowerroman { list-style-type: lower-roman; }
ol.upperroman { list-style-type: upper-roman; }
ol.lowergreek { list-style-type: lower-greek; }
.hdlist > table, .colist > table { border: 0; background: none; }
.hdlist > table > tbody > tr, .colist > table > tbody > tr { background: none; }
td.hdlist1 { padding-right: .8em; font-weight: bold; }
td.hdlist1, td.hdlist2 { vertical-align: top; }
.literalblock + .colist, .listingblock + .colist { margin-top: -0.5em; }
.colist > table tr > td:first-of-type { padding: 0 .8em; line-height: 1; }
.colist > table tr > td:last-of-type { padding: 0.25em 0; }
.qanda > ol > li > p > em:only-child { color: #00467f; }
.thumb, .th { line-height: 0; display: inline-block; border: solid 4px white; -webkit-box-shadow: 0 0 0 1px #dddddd; box-shadow: 0 0 0 1px #dddddd; }
.imageblock.left, .imageblock[style*="float: left"] { margin: 0.25em 0.625em 1.25em 0; }
.imageblock.right, .imageblock[style*="float: right"] { margin: 0.25em 0 1.25em 0.625em; }
.imageblock > .title { margin-bottom: 0; }
.imageblock.thumb, .imageblock.th { border-width: 6px; }
.imageblock.thumb > .title, .imageblock.th > .title { padding: 0 0.125em; }
.image.left, .image.right { margin-top: 0.25em; margin-bottom: 0.25em; display: inline-block; line-height: 0; }
.image.left { margin-right: 0.625em; }
.image.right { margin-left: 0.625em; }
a.image { text-decoration: none; }
span.footnote, span.footnoteref { vertical-align: super; font-size: 0.875em; }
span.footnote a, span.footnoteref a { text-decoration: none; }
#footnotes { padding-top: 0.75em; padding-bottom: 0.75em; margin-bottom: 0.625em; }
#footnotes hr { width: 20%; min-width: 6.25em; margin: -.25em 0 .75em 0; border-width: 1px 0 0 0; }
#footnotes .footnote { padding: 0 0.375em; line-height: 1.3; font-size: 0.875em; margin-left: 1.2em; text-indent: -1.2em; margin-bottom: .2em; }
#footnotes .footnote a:first-of-type { font-weight: bold; text-decoration: none; }
#footnotes .footnote:last-of-type { margin-bottom: 0; }
#content #footnotes { margin-top: -0.625em; margin-bottom: 0; padding: 0.75em 0; }
.gist .file-data > table { border: none; background: #fff; width: 100%; margin-bottom: 0; }
.gist .file-data > table td.line-data { width: 99%; }
div.unbreakable { page-break-inside: avoid; }
.big { font-size: larger; }
.small { font-size: smaller; }
.underline { text-decoration: underline; }
.overline { text-decoration: overline; }
.line-through { text-decoration: line-through; }
.aqua { color: #00bfbf; }
.aqua-background { background-color: #00fafa; }
.black { color: black; }
.black-background { background-color: black; }
.blue { color: #0000bf; }
.blue-background { background-color: #0000fa; }
.fuchsia { color: #bf00bf; }
.fuchsia-background { background-color: #fa00fa; }
.gray { color: #606060; }
.gray-background { background-color: #7d7d7d; }
.green { color: #006000; }
.green-background { background-color: #007d00; }
.lime { color: #00bf00; }
.lime-background { background-color: #00fa00; }
.maroon { color: #600000; }
.maroon-background { background-color: #7d0000; }
.navy { color: #000060; }
.navy-background { background-color: #00007d; }
.olive { color: #606000; }
.olive-background { background-color: #7d7d00; }
.purple { color: #600060; }
.purple-background { background-color: #7d007d; }
.red { color: #bf0000; }
.red-background { background-color: #fa0000; }
.silver { color: #909090; }
.silver-background { background-color: #bcbcbc; }
.teal { color: #006060; }
.teal-background { background-color: #007d7d; }
.white { color: #bfbfbf; }
.white-background { background-color: #fafafa; }
.yellow { color: #bfbf00; }
.yellow-background { background-color: #fafa00; }
span.icon > [class^="icon-"], span.icon > [class*=" icon-"] { cursor: default; }
.admonitionblock td.icon [class^="icon-"]:before { font-size: 2.5em; text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5); cursor: default; }
.admonitionblock td.icon .icon-note:before { content: "\f05a"; color: #005498; color: #003f72; }
.admonitionblock td.icon .icon-tip:before { content: "\f0eb"; text-shadow: 1px 1px 2px rgba(155, 155, 0, 0.8); color: #111; }
.admonitionblock td.icon .icon-warning:before { content: "\f071"; color: #bf6900; }
.admonitionblock td.icon .icon-caution:before { content: "\f06d"; color: #bf3400; }
.admonitionblock td.icon .icon-important:before { content: "\f06a"; color: #bf0000; }
.conum { display: inline-block; color: white !important; background-color: #222222; -webkit-border-radius: 100px; border-radius: 100px; text-align: center; width: 20px; height: 20px; font-size: 12px; font-weight: bold; line-height: 20px; font-family: Arial, sans-serif; font-style: normal; position: relative; top: -2px; letter-spacing: -1px; }
.conum * { color: white !important; }
.conum + b { display: none; }
.conum:after { content: attr(data-value); }
.conum:not([data-value]):empty { display: none; }
.literalblock > .content > pre, .listingblock > .content > pre { -webkit-border-radius: 0; border-radius: 0; }


        </style>
        <style>

            .listingblock .pygments .hll { background-color: #ffffcc }
.listingblock .pygments, .listingblock .pygments code { background: #ffffff; }
.listingblock .pygments .tok-c { color: #008000 } /* Comment */
.listingblock .pygments .tok-err { border: 1px solid #FF0000 } /* Error */
.listingblock .pygments .tok-k { color: #0000ff } /* Keyword */
.listingblock .pygments .tok-cm { color: #008000 } /* Comment.Multiline */
.listingblock .pygments .tok-cp { color: #0000ff } /* Comment.Preproc */
.listingblock .pygments .tok-c1 { color: #008000 } /* Comment.Single */
.listingblock .pygments .tok-cs { color: #008000 } /* Comment.Special */
.listingblock .pygments .tok-ge { font-style: italic } /* Generic.Emph */
.listingblock .pygments .tok-gh { font-weight: bold } /* Generic.Heading */
.listingblock .pygments .tok-gp { font-weight: bold } /* Generic.Prompt */
.listingblock .pygments .tok-gs { font-weight: bold } /* Generic.Strong */
.listingblock .pygments .tok-gu { font-weight: bold } /* Generic.Subheading */
.listingblock .pygments .tok-kc { color: #0000ff } /* Keyword.Constant */
.listingblock .pygments .tok-kd { color: #0000ff } /* Keyword.Declaration */
.listingblock .pygments .tok-kn { color: #0000ff } /* Keyword.Namespace */
.listingblock .pygments .tok-kp { color: #0000ff } /* Keyword.Pseudo */
.listingblock .pygments .tok-kr { color: #0000ff } /* Keyword.Reserved */
.listingblock .pygments .tok-kt { color: #2b91af } /* Keyword.Type */
.listingblock .pygments .tok-s { color: #a31515 } /* Literal.String */
.listingblock .pygments .tok-nc { color: #2b91af } /* Name.Class */
.listingblock .pygments .tok-ow { color: #0000ff } /* Operator.Word */
.listingblock .pygments .tok-sb { color: #a31515 } /* Literal.String.Backtick */
.listingblock .pygments .tok-sc { color: #a31515 } /* Literal.String.Char */
.listingblock .pygments .tok-sd { color: #a31515 } /* Literal.String.Doc */
.listingblock .pygments .tok-s2 { color: #a31515 } /* Literal.String.Double */
.listingblock .pygments .tok-se { color: #a31515 } /* Literal.String.Escape */
.listingblock .pygments .tok-sh { color: #a31515 } /* Literal.String.Heredoc */
.listingblock .pygments .tok-si { color: #a31515 } /* Literal.String.Interpol */
.listingblock .pygments .tok-sx { color: #a31515 } /* Literal.String.Other */
.listingblock .pygments .tok-sr { color: #a31515 } /* Literal.String.Regex */
.listingblock .pygments .tok-s1 { color: #a31515 } /* Literal.String.Single */
.listingblock .pygments .tok-ss { color: #a31515 } /* Literal.String.Symbol */

        </style>
        <style>

            /* http://stackoverflow.com/a/30195325 */
            ol > li:before {
                content: "";
                display: block;
                height: 1em;
            }
            ol > li > p:first-child {
                margin-top: -1em;
            }

            /* wrap inline code */
            *:not(pre) > code {
                white-space: pre-wrap;
            }
            
            /* don't wrap code blocks */
            pre, pre code {
                overflow: auto;
                white-space: pre;
                word-wrap: normal;
            }

            /* match margin-bottom of div.paragraph */
            div.stemblock div.content {
                margin-bottom: 1.25em;
            }

            /* fill page */
            table {
                width: 100%;
            }

            /* allow captions to wrap */
            .tableblock > caption {
                max-width: inherit;
                white-space: inherit;
            }

        </style>
        <title></title>
    </head>
    
        <body class="toc2 toc-left">
            <div id="header">
                <div class="toc2" id="toc">
                    <div id="toctitle">Table of Contents</div>
                    <ul class="sectlevel1">
<li><a href="#objectives">Objectives</a></li>
<li><a href="#academic-honesty">Academic Honesty</a>
<ul class="sectlevel2">
<li><a href="#reasonable">Reasonable</a></li>
<li><a href="#not-reasonable">Not Reasonable</a></li>
</ul>
</li>
<li><a href="#assessment">Assessment</a></li>
<li><a href="#getting-started">Getting Started</a>
<ul class="sectlevel2">
<li><a href="#option-1-start-from-a-clean-slate">Option 1: Start from a Clean Slate</a></li>
<li><a href="#option-2-extend-your-server">Option 2: Extend Your Server</a></li>
</ul>
</li>
<li><a href="#get-servered">Get Servered</a>
<ul class="sectlevel2">
<li><a href="#server-c">server.c</a>
<ul class="sectlevel3">
<li><a href="#main">main</a></li>
<li><a href="#connected">connected</a></li>
<li><a href="#error">error</a></li>
<li><a href="#freedir">freedir</a></li>
<li><a href="#handler">handler</a></li>
<li><a href="#htmlspecialchars">htmlspecialchars</a></li>
<li><a href="#indexes">indexes</a></li>
<li><a href="#interpret">interpret</a></li>
<li><a href="#list">list</a></li>
<li><a href="#load">load</a></li>
<li><a href="#lookup">lookup</a></li>
<li><a href="#reason">reason</a></li>
<li><a href="#redirect">redirect</a></li>
<li><a href="#request">request</a></li>
<li><a href="#respond">respond</a></li>
<li><a href="#create">create</a></li>
<li><a href="#listener">listener</a></li>
<li><a href="#start">start</a></li>
<li><a href="#stop">stop</a></li>
<li><a href="#transfer">transfer</a></li>
<li><a href="#urldecode">urldecode</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#service-check">Service Check</a>
<ul class="sectlevel2">
<li><a href="#connect">connect</a></li>
<li><a href="#listener-2">listener</a></li>
<li><a href="#create-2">create</a></li>
<li><a href="#stop-2">stop</a></li>
</ul>
</li>
</ul>
                </div>
            </div>
            <div id="content">
                <h1>Problem: Server (Part 2)</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Questions? Feel free to head to <a href="https://www.reddit.com/r/cs50">CS50 on Reddit</a>, <a href="http://cs50.stackexchange.com">CS50 on StackExchange</a>, the <code>#cs50ap</code> channel on <a href="https://cs50x.slack.com">CS50x Slack</a> (after signing up), or the <a href="https://www.facebook.com/groups/cs50">CS50 Facebook group</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="objectives"><a class="link" href="#objectives">Objectives</a></h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Become familiar with HTTP.</p>
</li>
<li>
<p>Apply familiar techniques in unfamiliar contexts.</p>
</li>
<li>
<p>Transition from C to web programming</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="academic-honesty"><a class="link" href="#academic-honesty">Academic Honesty</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This course&#8217;s philosophy on academic honesty is best stated as "be reasonable." The course recognizes that interactions with classmates and others can facilitate mastery of the course&#8217;s material. However, there remains a line between enlisting the help of another and submitting the work of another. This policy characterizes both sides of that line.</p>
</div>
<div class="paragraph">
<p>The essence of all work that you submit to this course must be your own. Collaboration on problems is not permitted (unless explicitly stated otherwise) except to the extent that you may ask classmates and others for help so long as that help does not reduce to another doing your work for you. Generally speaking, when asking for help, you may show your code or writing to others, but you may not view theirs, so long as you and they respect this policy&#8217;s other constraints. Collaboration on quizzes and tests is not permitted at all. Collaboration on the final project is permitted to the extent prescribed by its specification.</p>
</div>
<div class="paragraph">
<p>Below are rules of thumb that (inexhaustively) characterize acts that the course considers reasonable and not reasonable. If in doubt as to whether some act is reasonable, do not commit it until you solicit and receive approval in writing from your instructor. If a violation of this policy is suspected and confirmed, your instructor reserves the right to impose local sanctions on top of any disciplinary outcome that may include an unsatisfactory or failing grade for work submitted or for the course itself.</p>
</div>
<div class="sect2">
<h3 id="reasonable"><a class="link" href="#reasonable">Reasonable</a></h3>
<div class="ulist">
<ul>
<li>
<p>Communicating with classmates about problems in English (or some other spoken language).</p>
</li>
<li>
<p>Discussing the course&#8217;s material with others in order to understand it better.</p>
</li>
<li>
<p>Helping a classmate identify a bug in his or her code, such as by viewing, compiling, or running his or her code, even on your own computer.</p>
</li>
<li>
<p>Incorporating snippets of code that you find online or elsewhere into your own code, provided that those snippets are not themselves solutions to assigned problems and that you cite the snippets' origins.</p>
</li>
<li>
<p>Reviewing past years' quizzes, tests, and solutions thereto.</p>
</li>
<li>
<p>Sending or showing code that you&#8217;ve written to someone, possibly a classmate, so that he or she might help you identify and fix a bug.</p>
</li>
<li>
<p>Sharing snippets of your own solutions to problems online so that others might help you identify and fix a bug or other issue.</p>
</li>
<li>
<p>Turning to the web or elsewhere for instruction beyond the course&#8217;s own, for references, and for solutions to technical difficulties, but not for outright solutions to problems or your own final project.</p>
</li>
<li>
<p>Whiteboarding solutions to problems with others using diagrams or pseudocode but not actual code.</p>
</li>
<li>
<p>Working with (and even paying) a tutor to help you with the course, provided the tutor does not do your work for you.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="not-reasonable"><a class="link" href="#not-reasonable">Not Reasonable</a></h3>
<div class="ulist">
<ul>
<li>
<p>Accessing a solution to some problem prior to (re-)submitting your own.</p>
</li>
<li>
<p>Asking a classmate to see his or her solution to a problem before (re-)submitting your own.</p>
</li>
<li>
<p>Decompiling, deobfuscating, or disassembling the staff&#8217;s solutions to problems.</p>
</li>
<li>
<p>Failing to cite (as with comments) the origins of code, writing, or techniques that you discover outside of the course&#8217;s own lessons and integrate into your own work, even while respecting this policy&#8217;s other constraints.</p>
</li>
<li>
<p>Giving or showing to a classmate a solution to a problem when it is he or she, and not you, who is struggling to solve it.</p>
</li>
<li>
<p>Looking at another individual&#8217;s work during a quiz or test.</p>
</li>
<li>
<p>Paying or offering to pay an individual for work that you may submit as (part of) your own.</p>
</li>
<li>
<p>Providing or making available solutions to problems to individuals who might take this course in the future.</p>
</li>
<li>
<p>Searching for, soliciting, or viewing a quiz&#8217;s questions or answers prior to taking the quiz.</p>
</li>
<li>
<p>Searching for or soliciting outright solutions to problems online or elsewhere.</p>
</li>
<li>
<p>Splitting a problem&#8217;s workload with another individual and combining your work (unless explicitly authorized by the problem itself).</p>
</li>
<li>
<p>Submitting (after possibly modifying) the work of another individual beyond allowed snippets.</p>
</li>
<li>
<p>Submitting the same or similar work to this course that you have submitted or will submit to another.</p>
</li>
<li>
<p>Using resources during a quiz beyond those explicitly allowed in the quiz&#8217;s instructions.</p>
</li>
<li>
<p>Viewing another&#8217;s solution to a problem and basing your own solution on it.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="assessment"><a class="link" href="#assessment">Assessment</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Your work on this problem set will be evaluated along four axes primarily.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Scope</dt>
<dd>
<p>To what extent does your code implement the features required by our specification?</p>
</dd>
<dt class="hdlist1">Correctness</dt>
<dd>
<p>To what extent is your code consistent with our specifications and free of bugs?</p>
</dd>
<dt class="hdlist1">Design</dt>
<dd>
<p>To what extent is your code written well (i.e., clearly, efficiently, elegantly, and/or logically)?</p>
</dd>
<dt class="hdlist1">Style</dt>
<dd>
<p>To what extent is your code readable (i.e., commented and indented with variables aptly named)?</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>To obtain a passing grade in this course, all students must ordinarily submit all assigned problems unless granted an exception in writing by the instructor.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="getting-started"><a class="link" href="#getting-started">Getting Started</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, log into cs50.io and execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">update50</code></pre>
</div>
</div>
<div class="paragraph">
<p>within a terminal window to make sure your workspace is up-to-date.</p>
</div>
<div class="paragraph">
<p>Below are two options for getting started with this problem. The first option is for those who wish to start with the staff&#8217;s implementation of the features from <a href="https://docs.cs50.net/2016/ap/problems/server/1/server1.html">Server (Part 1)</a> already implemented for them. The second option is for those who wish to complete their own implementation of Server, relying on their own solution to Part 1 as their foundation. Only choose one of the below two options.</p>
</div>
<div class="paragraph">
<p>Then, after having chosen your option and followed all the steps therein, pick up at "Get Servered".</p>
</div>
<div class="sect2">
<h3 id="option-1-start-from-a-clean-slate"><a class="link" href="#option-1-start-from-a-clean-slate">Option 1: Start from a Clean Slate</a></h3>
<div class="paragraph">
<p>In your terminal window, execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span class="tok-nb">cd</span> ~/workspace/chapterB</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">wget http://docs.cs50.net/2016/ap/problems/server/2/server2.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p>Confirm you&#8217;ve downloaded that file, then unzip <code>server2.zip</code> (remember how?) and remove the ZIP file (remember how?).</p>
</div>
<div class="paragraph">
<p>Then navigate into the <code>server2</code> directory and list its contents (remember how?) and you should find that the directory contains four files and one folder</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">Makefile	parser.c	parser.h	<span class="blue">public</span>/		server.c</code></pre>
</div>
</div>
<div class="paragraph">
<p>Take care to only edit <code>server.c</code> for this problem, and not <code>parser.c</code> and <code>parser.h</code>. Though you are free to alter <code>Makefile</code>, you will most likely not find a need to do so.</p>
</div>
</div>
<div class="sect2">
<h3 id="option-2-extend-your-server"><a class="link" href="#option-2-extend-your-server">Option 2: Extend Your Server</a></h3>
<div class="paragraph">
<p>In your terminal window, execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash"><span class="tok-nb">cd</span> ~/workspace/chapterB</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">wget http://docs.cs50.net/ap/2016/ap/problems/server/2/server2.zip</code></pre>
</div>
</div>
<div class="paragraph">
<p>Confirm you&#8217;ve downloaded that file, then unzip <code>server2.zip</code> (remember how?) and remove the ZIP file (remember how?).</p>
</div>
<div class="paragraph">
<p>Then navigate into the <code>server2</code> directory and list its contents (remember how?) and you should find that the directory contains four files and one folder</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">Makefile	parser.c	parser.h	<span class="blue">public</span>/		server.c</code></pre>
</div>
</div>
<div class="paragraph">
<p>Copy and paste your <code>parser.c</code> from Part 1 into the distro&#8217;s <code>parser.c</code>, and if relevant, also copy in your <code>parser.h</code>. Though you are free to alter this Problem&#8217;s <code>Makefile</code> again, do not copy in the <code>Makefile</code> from Part 1 since this <code>Makefile</code> is a bit different from Server (Part 1).</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="get-servered"><a class="link" href="#get-servered">Get Servered</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The files in <span class="blue"><code>public</code></span>/ as well as <code>parser.c</code> and <code>parser.h</code> should be familiar to you from Problem 6-6. But maybe not so much with <code>server.c</code>. In this problem, you will implement the serving side of the server in order to create a complete server! Let&#8217;s dive into that distribution code, starting with a high-level overview.</p>
</div>
<div class="videoblock">
<div class="content">
<iframe width="960" height="540" src="https://www.youtube.com/embed/OnAItxJhS70?rel=0?rel=0" frameborder="0" allowfullscreen></iframe>
</div>
</div>
<div class="paragraph">
<p>And now a lower-level tour through the code.</p>
</div>
<div class="sect2">
<h3 id="server-c"><a class="link" href="#server-c">server.c</a></h3>
<div class="paragraph">
<p>Open up <code>server.c</code>, if not open already. Let&#8217;s take a tour.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Atop the file are a bunch of "feature test macro requirements" that allow us to use certain functions that are declared (conditionally) in the header files further below.</p>
</li>
<li>
<p>Defined next are a few constants that specify limits on HTTP requests sizes. We&#8217;ve (arbitrarily) based their values on defaults used by Apache, a popular web server. See httphttpd.apahce.orgdocs2.2modcore.html if curious.</p>
</li>
<li>
<p>Defined next is <code>BYTES</code>, a constant that specifies how many bytes we&#8217;ll eventually be reading into buffers at a time.</p>
</li>
<li>
<p>Next are a bunch of header files, including parser.h, followed by a definition of <code>BYTE</code>, which we&#8217;ve indeed defined as an 8-bit <code>char</code>, followed by a bunch of prototypes.</p>
</li>
<li>
<p>Finally, just above <code>main</code> are just a few global variables.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="main"><a class="link" href="#main">main</a></h4>
<div class="paragraph">
<p>Let&#8217;s now walk through <code>main</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Atop <code>main</code> is an initialization of what appears to be a global variable called <code>errno</code>. In fact, <code>errno</code> is defined in <code>errno.h</code> and is used by quite a few functions to indicate (via an <code>int</code>), in cases of error, precisely which error has occurred. See <code>man errno</code> for more details.</p>
</li>
<li>
<p>Shortly thereafter is a call to <code>getopt</code>, which is a function declared in <code>unistd.h</code> that makes it easier to parse command-line arguments. See <code>man 3 getopt</code> if curious. Notice how we use <code>getopt</code> (and some Boolean expressions) to ensure that <code>server</code> is used properly.</p>
</li>
<li>
<p>Next notice the call to <code>start</code> (for which you may have noticed a prototype earlier). More on that later.</p>
</li>
<li>
<p>Below that is a declaration of a <code>struct sigaction</code> via which we&#8217;ll listen for <code>SIGINT</code> (i.e., control-c), calling <code>handler</code> (a function defined by use elsewhere in <code>server.c</code>) if heard.</p>
</li>
<li>
<p>And then, after declaring some variables, <code>main</code> enters an infinite <code>while</code> loop.</p>
<div class="ulist">
<ul>
<li>
<p>Atop that loop, we first free any memory that might have been allocated by a previous iteration of the loop.</p>
</li>
<li>
<p>We then check whether we&#8217;ve been "signaled" via control-c to stop the server.
Thereafter, within an <code>if</code> statement, is a call to <code>connected</code>, a function you will implement so that it returns <code>true</code> if a client (e.g., a browser or even <code>curl</code>) has connected to the server.</p>
</li>
<li>
<p>After that is a call to <code>extract_request</code> and <code>parse</code> which you&#8217;ve implemented in Problem 6-6.</p>
</li>
<li>
<p>Next is a bunch of code that decodes that path (decoding any URL-encoded characters like %20) and "resolves" the path to a local path, figuring out exactly what file was requested on the server itself.</p>
</li>
<li>
<p>Below that, we ascertain whether that path leads to a directory or to a file and handle the request accordingly, ultimately calling <code>list</code>, <code>interpret</code>, or <code>transfer</code>.</p>
<div class="ulist">
<ul>
<li>
<p>For directories (that don&#8217;t have an <code>index.php</code> or <code>index.html</code> file inside them), we call <code>list</code> in order to display the directory&#8217;s contents.</p>
</li>
<li>
<p>For files ending in <code>.php</code> (whose "MIME type" is <code>text/x-php</code>), we call <code>interpret</code>.</p>
</li>
<li>
<p>For other (supported) files, we call <code>transfer</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>And that&#8217;s it for <code>main</code>! Notice, though, that throughout <code>main</code> are a few uses of <code>continue</code>, the effect of which is to jump back to the start of that infinite loop. Just before <code>continue</code> in some cases, too, is a call to <code>error</code> (another function we wrote) with an HTTP status code. Together, those lines allow the server to handle and respond to errors just before returning its attention to new requests.</p>
</div>
</div>
<div class="sect3">
<h4 id="connected"><a class="link" href="#connected">connected</a></h4>
<div class="paragraph">
<p>Oh no, seems like we didn&#8217;t implement this one. Back to this later.</p>
</div>
</div>
<div class="sect3">
<h4 id="error"><a class="link" href="#error">error</a></h4>
<div class="paragraph">
<p>Spend a bit of time looking through <code>error</code>, which is that function via which we respond to browsers with errors (e.g., 404). This function, though perhaps a bit long, should perhaps have some more familiar constructs. (If curious, we&#8217;re using <code>log10</code> simply to figure out how many digits, and thus <code>char</code> s, <code>code</code> is.)</p>
</div>
</div>
<div class="sect3">
<h4 id="freedir"><a class="link" href="#freedir">freedir</a></h4>
<div class="paragraph">
<p>This function exists simply to facilitate freeing memory that&#8217;s allocated by a function called <code>scandir</code> that we call in <code>list</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="handler"><a class="link" href="#handler">handler</a></h4>
<div class="paragraph">
<p>Thankfully, a short one! This function (called whenever a user hits control-c) essentially tells <code>main</code> to call <code>stop</code> by setting <code>signaled</code>, a global variable, to <code>true</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="htmlspecialchars"><a class="link" href="#htmlspecialchars">htmlspecialchars</a></h4>
<div class="paragraph">
<p>This function, named identically to that PHP function we saw earlier, escapes characters (e.g., <code>&lt;</code> as <code>&lt;</code>) that might otherwise "break" an HTML page. We call it from <code>list</code>, lest some file or directory we&#8217;re listing have a "dangerous" character in its name.</p>
</div>
</div>
<div class="sect3">
<h4 id="indexes"><a class="link" href="#indexes">indexes</a></h4>
<div class="paragraph">
<p>Though perhaps a bit confusing, this function checks to see if <code>index.php</code> or <code>index.html</code> exists in a directory or folder, and if indeed one exists, returns the path to that file so that the server can load the page.</p>
</div>
</div>
<div class="sect3">
<h4 id="interpret"><a class="link" href="#interpret">interpret</a></h4>
<div class="paragraph">
<p>This function enables the server to interpret PHP files. It&#8217;s a bit cryptic at first glance, but in a nutshell, all we&#8217;re doing,, upon receiving a request, say, <code>hello.php</code>, is executing a line like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="php"><span class="tok-x">QUERY_STRING=&quot;name=Alice&quot; REDIRECT_STATUS=200 SCRIPT_FILENAME=homeubuntuworkspaceunit6server2publichello.php php-cgi</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>the effect of which is to pass the contents of <code>hello.php</code> to PHP&#8217;s interpreter (i.e., <code>php-cgi</code>), with any HTTP parameters supplied via an "environment variable" called <code>QUERY_STRING</code>. Via <code>load</code> (a function we wrote), we then read the interpreter&#8217;s output into memory (via `load). And then we respond to the browser with (dynamically generated) output like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">HTTP/1.1 200 OK
X-Powered-By: PHP/5.5.9-1ubuntu4.12
Content-type: text/html

<span class="tok-cp">&lt;!DOCTYPE html&gt;</span>

<span class="tok-nt">&lt;html&gt;</span>
	<span class="tok-nt">&lt;head&gt;</span>
		<span class="tok-nt">&lt;title&gt;</span>hello<span class="tok-nt">&lt;/title&gt;</span>
	<span class="tok-nt">&lt;/head&gt;</span>
	<span class="tok-nt">&lt;body&gt;</span>
		hello, Alice
	<span class="tok-nt">&lt;/body&gt;</span>
<span class="tok-nt">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Even though the PHP code in <code>hello.php</code> is pretty-printed, it&#8217;s output isn&#8217;t quite as pretty. (Take a look at <code>hello.php</code>. Can you deduce why?)</p>
</div>
<div class="paragraph">
<p>Odds are you&#8217;re unfamiliar with <code>open</code>. That function opens a <code>pipe</code> to a process (<code>php-cgi</code> in our case), which provides us with a <code>FILE</code> pointer via which we can read that process&#8217;s standard output (as though it were an actual file).</p>
</div>
<div class="paragraph">
<p>Notice how this function calls <code>load</code>, though, in order to read the PHP interpreter&#8217;s output into memory and the extraction process is done by <code>extract_headers</code>, a function you implemented in the previous problem.</p>
</div>
</div>
<div class="sect3">
<h4 id="list"><a class="link" href="#list">list</a></h4>
<div class="paragraph">
<p>Ah, here&#8217;s that function that generates a directory listing. Notice how much code it takes to generate HTML using C, thanks to requisite memory management.</p>
</div>
</div>
<div class="sect3">
<h4 id="load"><a class="link" href="#load">load</a></h4>
<div class="paragraph">
<p>This function loads a file into dynamically allocated memory, storing the address of the loaded file in content (notice how the argument passed into load is <code>BYTE** content</code>, a pointer that points to a pointer that points to a BYTE) and stores the length of the loaded file in length.</p>
</div>
</div>
<div class="sect3">
<h4 id="lookup"><a class="link" href="#lookup">lookup</a></h4>
<div class="paragraph">
<p>A simple function that looks up the MIME type of a file and returns the supported extensions (e.g., <code>text/html</code>), else returns NULL.</p>
</div>
</div>
<div class="sect3">
<h4 id="reason"><a class="link" href="#reason">reason</a></h4>
<div class="paragraph">
<p>This function simply maps HTTP "status codes" (e.g., <code>200</code>) to "reason phrases" (e.g., <code>OK</code>).</p>
</div>
</div>
<div class="sect3">
<h4 id="redirect"><a class="link" href="#redirect">redirect</a></h4>
<div class="paragraph">
<p>Ah, neat, this function redirects a client to another location (i.e., URL) by sending a status code of <code>301</code> plus a <code>Location</code> header.</p>
</div>
</div>
<div class="sect3">
<h4 id="request"><a class="link" href="#request">request</a></h4>
<div class="paragraph">
<p>Ah, this one&#8217;s a biggie. But worth reading through. When the server receives a request from a client, the server doesn&#8217;t know in advance how many characters the request will comprise. And so this function iteratively reads bytes form the client, one buffer&#8217;s worth at a time, calling <code>realloc</code> as needed to store the entire message (i.e., request).</p>
</div>
<div class="paragraph">
<p>Notice this function&#8217;s use of pointers, dynamic memory allocation, pointer arithmetic, and more. All somewhat familiar by now, but definitely a lot of it all in one place! Do try to understand each and every line, if only for the practice. Ultimately, it keeps reading bytes from the client until it encounters <code>\r\n\r\n</code> (aka <code>CRLF CRLF</code>), which, according to HTTP&#8217;s specs, marks the end of a request&#8217;s headers.</p>
</div>
<div class="paragraph">
<p>If curious, know that <code>read</code> is quite like <code>read</code> except that it reads from a "file descriptor" (i.e., an <code>int</code>) instead of from a <code>FILE</code> pointer (i.e., <code>FILE*</code>). See its <code>man</code> page for more.</p>
</div>
</div>
<div class="sect3">
<h4 id="respond"><a class="link" href="#respond">respond</a></h4>
<div class="paragraph">
<p>It&#8217;s this function that actually sends to a client an HTTP response, given a status code, heads, a body, and that body&#8217;s length. For instance, it&#8217;s this function that sends a response like the below.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="html">HTTP/1.1 200 OK
X-Powered-By: PHP/5.5.9-1ubuntu4.12
Content-type: text/html

<span class="tok-cp">&lt;!DOCTYPE html&gt;</span>

<span class="tok-nt">&lt;html&gt;</span>
	<span class="tok-nt">&lt;head&gt;</span>
		<span class="tok-nt">&lt;title&gt;</span>hello<span class="tok-nt">&lt;/title&gt;</span>
	<span class="tok-nt">&lt;/head&gt;</span>
	<span class="tok-nt">&lt;body&gt;</span>
		hello, Alice
	<span class="tok-nt">&lt;/body&gt;</span>
<span class="tok-nt">&lt;/html&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Know that <code>printf</code> is quite like <code>printf</code> (or, really <code>fprintf</code>) except that the former, like <code>read</code>, writes to a "file descriptor" instead of a <code>FILE*</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="create"><a class="link" href="#create">create</a></h4>
<div class="paragraph">
<p>Hmm, seems like this function isn&#8217;t fully implemented yet.</p>
</div>
</div>
<div class="sect3">
<h4 id="listener"><a class="link" href="#listener">listener</a></h4>
<div class="paragraph">
<p>Darn, another <code>TODO</code>. More on that later.</p>
</div>
</div>
<div class="sect3">
<h4 id="start"><a class="link" href="#start">start</a></h4>
<div class="paragraph">
<p>Here&#8217;s the function that started it all (pun intended). This function finds the path to the server&#8217;s root, ensuring it is executable, then calls <code>create</code> and <code>listen</code> to help start the server.</p>
</div>
</div>
<div class="sect3">
<h4 id="stop"><a class="link" href="#stop">stop</a></h4>
<div class="paragraph">
<p>Drat, another one. But at least it&#8217;s our last!</p>
</div>
</div>
<div class="sect3">
<h4 id="transfer"><a class="link" href="#transfer">transfer</a></h4>
<div class="paragraph">
<p>This function&#8217;s purpose in life is to transfer a file from the server to a client. Whereas <code>interpret</code> handles dynamic content (generated by PHP scripts), <code>transfer</code> handles static content (e.g., JPEGs). Notice how this function calls <code>load</code> in order to read some file from disk.</p>
</div>
</div>
<div class="sect3">
<h4 id="urldecode"><a class="link" href="#urldecode">urldecode</a></h4>
<div class="paragraph">
<p>This function, also named after a PHP function, URL-decodes a string, converting special characters like <code>%20</code> back to their original values.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="service-check"><a class="link" href="#service-check">Service Check</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>Phew. Now that we&#8217;re done with our tour of the distro code, let&#8217;s implement the broken parts of the server! Similarly to Part 1, this is a collaboration problem, and you may thus divide the work amongst the two of you however you find fit. Our recommendation is for one person to tackle <code>connect</code> and <code>listener</code> while the other handles <code>create</code> and <code>stop</code>.</p>
</div>
<div class="paragraph">
<p>Though this problem may appear to be conceptually challenging, the number of lines of code you will actually write will not be much. If ever struggling, consult your partner for help!</p>
</div>
<div class="paragraph">
<p>Recall from Part 1, if you&#8217;d like to play with the staff&#8217;s implementation of server, execute in a terminal window</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">~cs50/chapterB/server public</code></pre>
</div>
</div>
<div class="paragraph">
<p>and if you&#8217;d like to test out your server with curl, execute</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="bash">curl -i http://localhost:8080/</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="connect"><a class="link" href="#connect">connect</a></h3>
<div class="paragraph">
<p>Complete the implementation of <code>connect</code> in such a way that the function checks whether a client has connected to the server.</p>
</div>
<div class="paragraph">
<p>First, define a client address of type <code>struct sockaddr_in</code> and set the address of the client address to 0. Odds are, you&#8217;ll find the function <code>memset</code> of use.</p>
</div>
<div class="paragraph">
<p>Then, create a variable of type <code>socklen_t</code> that holds the length, or size, of the client address variable. Your code should be something reminiscent of</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span class="tok-kt">size_t</span> <span class="tok-n">length</span> <span class="tok-o">=</span> <span class="tok-n">x</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>with <code>size_t</code> replaced with <code>socklen_t</code> and the length of the client address determined by invoking a function reminiscent of a past problem (how do you determine the size of a variable).</p>
</div>
<div class="paragraph">
<p>Now, assign <code>cfd</code>, a global variable, to the return value of <code>accept</code>, passing in the appropriate arguments to <code>accept</code>. <code>accept</code> takes in three arguments: a socket file descriptor (which, if you remember, we&#8217;ve declared as a global), the address of a <code>sockaddr</code> variable, the address of the length of address, and an optional fourth argument, which will not be needed in this situation. If curious, take a look at the <code>man</code> page for <code>accept</code>. Odds are, your line of code will look something like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span class="tok-n">cfd</span> <span class="tok-o">=</span> <span class="tok-n">accept</span><span class="tok-p">(</span><span class="tok-n">x</span><span class="tok-p">,</span> <span class="tok-n">y</span><span class="tok-p">,</span> <span class="tok-n">z</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>x</code>, <code>y</code>, and <code>z</code> are substituted with the appropriate arguments.</p>
</div>
<div class="paragraph">
<p>Finally, if the value of <code>cfd</code> has not change from <code>-1</code>, return <code>false</code>, else <code>true</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="listener-2"><a class="link" href="#listener-2">listener</a></h3>
<div class="paragraph">
<p>Complete the implementation of <code>listener</code> in such a way that the function listens for a connection and announces the port in use when connected.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s first check the <code>man</code> page for <code>listen</code>. It seems <code>listen</code> takes in two arguments a socket file descriptor and a backlog. Let&#8217;s first call <code>listen</code> with our socket file descriptor and <code>SOMAXCONN</code> as our backlog. For those curious, <code>SOMAXCONN</code> is simply the max limit, defined in <code>sys/socket.h</code>, for the number of pending requests the server will take. If the return value of <code>listen</code> is <code>-1</code>, call <code>stop</code> to terminate the server.</p>
</div>
<div class="paragraph">
<p>Next, let&#8217;s do something similar to what we did in <code>connect</code>. Let&#8217;s define another <code>struct sockaddr_in</code> address without assigning to it any value, then get the length of your new address.</p>
</div>
<div class="paragraph">
<p>Once more, let&#8217;s pull up the <code>man</code> page for <code>getsockname</code>. Looks familiar, eh? Let&#8217;s call <code>getsockname</code> and if the return value is <code>-1</code>, call <code>stop</code>.</p>
</div>
<div class="paragraph">
<p>If <code>stop</code> isn&#8217;t invoked, then our <code>printf</code> statements will print out to the terminal on which port the user server is listening. But if you look at our second print statement, <code>-50</code> is definitely not the right port that we&#8217;re listening on! So delete that <code>TODO</code> and <code>-50</code> and replace it with</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span class="tok-n">ntohs</span><span class="tok-p">(</span><span class="tok-n">addr</span><span class="tok-p">.</span><span class="tok-n">sin_port</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>addr</code> is the name of your variable of type <code>sockaddr_in</code> that you declared earlier.</p>
</div>
<div class="paragraph">
<p>For those curious, <code>ntohs</code> is a function that converts a value&#8217;s byte order from the network byte order to the host&#8217;s, or client&#8217;s, byte order. Some machines are "little endian" while others are "big endian", which are just names for the byte ordering a system uses, so it&#8217;s important for clients and networks to be able to read data regardless of their byte order. For more information on <code>ntohs</code>, feel free to use its <code>man</code> page. And if curious about little and big endian, do just take a look at <a href="https://betterexplained.com/articles/understanding-big-and-little-endian-byte-order">this</a>, but no need to feel obliged!</p>
</div>
</div>
<div class="sect2">
<h3 id="create-2"><a class="link" href="#create-2">create</a></h3>
<div class="paragraph">
<p>Complete the implementation of <code>create</code> in such a way that the function creates a server socket.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s first take a look at the <code>man</code> page for <code>socket</code>.</p>
</div>
<div class="paragraph">
<p>Hmm, it seems that <code>socket</code> takes a <code>domain</code>, <code>type</code>, and <code>protocol</code>, as its arguments. Let&#8217;s call <code>socket</code>, using <code>AF_INET</code> and <code>SOCK_STREAM</code> for the <code>domain</code> and <code>type</code> and let&#8217;s leave <code>protocol</code> as <code>0</code>, since we don&#8217;t have a specified protocol for the socket. Let&#8217;s also assign the return value of <code>socket</code> to our global socket variable, <code>sfd</code>.</p>
</div>
<div class="paragraph">
<p>If curious, <code>AF_INET</code> simply means we&#8217;d like TCPIP as our communication domain and <code>SOCK_STREAM</code> let&#8217;s <code>socket</code> know that we&#8217;d like our socket to provide a sequenced, reliable stream of bytes for our connection.</p>
</div>
<div class="paragraph">
<p>According to the <code>man</code> page of <code>socket</code>, <code>socket</code> returns <code>-1</code> upon failure, so let&#8217;s check for failure and if indeed <code>socket</code> returned <code>-1</code>, call <code>stop</code> to terminate the server.</p>
</div>
<div class="paragraph">
<p>Now, let&#8217;s allow for reuse of address, to avoid any "Address already in use" messages. We can do that by writing the following code.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span class="tok-kt">int</span> <span class="tok-n">optval</span> <span class="tok-o">=</span> <span class="tok-mi">1</span><span class="tok-p">;</span>
<span class="tok-n">setsockopt</span><span class="tok-p">(</span><span class="tok-n">x</span><span class="tok-p">,</span> <span class="tok-n">SOL_SOCKET</span><span class="tok-p">,</span> <span class="tok-n">SO_REUSEADDR</span><span class="tok-p">,</span> <span class="tok-n">y</span><span class="tok-p">,</span> <span class="tok-n">z</span><span class="tok-p">);</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>x</code>, <code>y</code>, and <code>z</code> are the socket file descriptor, the address of the optval variable, and the size of the optval variable respectively.</p>
</div>
<div class="paragraph">
<p>Finally, let&#8217;s bind a name, or more accurately an address, to the socket. Create a server address variable of type <code>struct sockaddr_in</code> and set the address of the server address to 0. Odds are, you&#8217;ll find the function <code>memset</code> of use. Because your server address is of type <code>struct sockaddr_in</code>, we can access inside the struct (similar to <code>RGBTriple</code> way back when), by using dot notation. If I wanted to access a field inside the struct named <code>name</code>, for example, then I can assign the <code>name</code> to <code>"David"</code> by doing</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span class="tok-n">serv_addr</span><span class="tok-p">.</span><span class="tok-n">name</span> <span class="tok-o">=</span> <span class="tok-s">&quot;David&quot;</span><span class="tok-p">;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>if my variable&#8217;s name were <code>serv_addr</code>. Now assign</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>sin_family</code> field of your variable to <code>AF_INET</code></p>
</li>
<li>
<p>The <code>sin_port</code> field to <code>htons(port)</code></p>
</li>
<li>
<p>And the <code>sin_addr.s_addr</code> field to <code>htonl(INADDR_ANY)</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For those curious, <code>htons</code> and <code>htonl</code> are functions that convert a value&#8217;s byte order from the network byte order to the host&#8217;s, or client&#8217;s, byte order. Some machines are "little endian" while others are "big endian", which are just names for the byte ordering a system uses, so it&#8217;s important for clients and networks to be able to read data regardless of their byte order. For more information on the functions, feel free to use their <code>man</code> pages. And if curious about little and big endian, do just take a look at <a href="https://betterexplained.com/articles/understanding-big-and-little-endian-byte-order">this</a>, but no need to feel obliged!</p>
</div>
<div class="paragraph">
<p>Afterwards, let&#8217;s replace that ugly <code>/* TODO */ false</code> inside the <code>if</code> statement with a real Boolean expression. We&#8217;ve created a name for the socket but have yet to assign the name to the socket, so let&#8217;s do that now.</p>
</div>
<div class="paragraph">
<p>Check out the <code>man</code> page for <code>bind</code>. Seems like <code>bind</code> takes three arguments. A socket file descriptor (hmm, sounds like something we&#8217;ve already seen in this function), an address (or pointer) to a <code>sockaddr_in</code>, and the length, or size, of the address. Upon failure, <code>bind</code> returns <code>-1</code> so let&#8217;s change our <code>if</code> statement to check if <code>bind</code> fails. Your expression should look something like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c"><span class="tok-k">if</span> <span class="tok-p">(</span><span class="tok-n">bind</span><span class="tok-p">(</span><span class="tok-n">x</span><span class="tok-p">,</span> <span class="tok-n">y</span><span class="tok-p">,</span> <span class="tok-n">z</span><span class="tok-p">)</span> <span class="tok-o">==</span> <span class="tok-o">-</span><span class="tok-mi">1</span><span class="tok-p">)</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>where <code>x</code>, <code>y</code>, and <code>z</code> are replaced by the appropriate arguments. If finding yourself in a pickle, consult your partner and/or <code>connect</code> and <code>listen</code> for inspiration!</p>
</div>
</div>
<div class="sect2">
<h3 id="stop-2"><a class="link" href="#stop-2">stop</a></h3>
<div class="paragraph">
<p>Complete the implementation of <code>stop</code> in such a way that the function frees any allocated memory not freed and closes any file descriptors still open.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s how.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Check to see if the global variable, <code>root</code>, is <code>NULL</code>. If not, then call <code>free</code>.</p>
</li>
<li>
<p>Then check to see if server socket (now, which global variable is that) is open. If still open, call <code>close</code> on the server socket.</p>
</li>
<li>
<p>Finally, stop the server by calling the <code>exit</code> function and passing in <code>errsv</code> as its argument.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This was Server (Part 2).</p>
</div>
</div>
</div>
</div>
            </div>
        </body>
    
</html>
